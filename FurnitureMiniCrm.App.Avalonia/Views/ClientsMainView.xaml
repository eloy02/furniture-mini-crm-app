<UserControl
    x:Class="FurnitureMiniCrm.App.Avalonia.Views.ClientsMainView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:reactiveUi="http://reactiveui.net"
    xmlns:vm="clr-namespace:FurnitureMiniCrm.App.Core.ViewModels;assembly=FurnitureMiniCrm.App.Core"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

  <!--<Design.DataContext>
    <vm:ClientsMainViewModel />
  </Design.DataContext>-->

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height=".5*" />
      <RowDefinition Height="auto" />
      <RowDefinition Height=".4*" />
    </Grid.RowDefinitions>

    <Grid Grid.Row="0">

      <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <TextBlock Classes="h3">
        Список клиентов
      </TextBlock>

      <DockPanel Grid.Row="1">
        <StackPanel
            Margin="10"
            DockPanel.Dock="Top"
            Orientation="Horizontal"
            Spacing="10">
          <Button Command="{Binding CreateClient}">Новый клиент</Button>

          <Button Command="{Binding EditClient}">Редактировать</Button>
        </StackPanel>

        <DataGrid
            AutoGenerateColumns="False"
            CanUserResizeColumns="True"
            GridLinesVisibility="All"
            HeadersVisibility="All"
            Items="{Binding Clients, Mode=OneWay}"
            SelectedItem="{Binding SelectedClient, Mode=TwoWay}"
            SelectionMode="Single">
          <DataGrid.Columns>
            <DataGridTextColumn
                Binding="{Binding Fio, Mode=OneWay}"
                Header="ФИО"
                IsReadOnly="True" />
            <DataGridTextColumn
                Binding="{Binding Address.FullAddress, Mode=OneWay}"
                Header="Адрес"
                IsReadOnly="True" />
            <DataGridTextColumn
                Binding="{Binding PhoneNumber, Mode=OneWay}"
                Header="Телефон"
                IsReadOnly="True" />
            <DataGridTextColumn
                Binding="{Binding EmailAddress, Mode=OneWay}"
                Header="Email"
                IsReadOnly="True" />
            <DataGridTemplateColumn Width="150" Header="Комментарии">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                  <TextBlock
                      Text="{Binding Comments, Mode=OneWay}"
                      TextAlignment="Left"
                      TextWrapping="Wrap" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
          </DataGrid.Columns>
        </DataGrid>
      </DockPanel>
    </Grid>

    <Separator
        Grid.Row="1"
        Height="1"
        Background="LightGray" />

    <Grid Grid.Row="2" Margin="0,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <TextBlock Classes="h3">
        Заказы клиента
      </TextBlock>

      <DockPanel Grid.Row="1">
        <StackPanel
            Margin="10"
            DockPanel.Dock="Top"
            Orientation="Horizontal"
            Spacing="10">
          <Button Command="{Binding NewOrderForClient}">Новый заказ</Button>

          <Button Command="{Binding EditClientOrder}">Просмотр заказа</Button>
        </StackPanel>

        <DataGrid
            AutoGenerateColumns="False"
            GridLinesVisibility="All"
            HeadersVisibility="All"
            Items="{Binding ClientOrders}"
            SelectedItem="{Binding SelectedClientOrder, Mode=TwoWay}"
            SelectionMode="Single">
          <DataGrid.Columns>
            <DataGridTextColumn
                Binding="{Binding Id, Mode=OneWay}"
                Header="№ Заказа"
                IsReadOnly="True" />
            <DataGridTextColumn
                Binding="{Binding CreateDate, Mode=OneWay}"
                Header="Дата заказа"
                IsReadOnly="True" />
            <DataGridTextColumn
                Binding="{Binding Sum, Mode=OneWay}"
                Header="Сумма заказа"
                IsReadOnly="True" />
            <DataGridTextColumn
                Binding="{Binding Status.Name, Mode=OneWay}"
                Header="Статус заказа"
                IsReadOnly="True" />
          </DataGrid.Columns>
        </DataGrid>
      </DockPanel>
    </Grid>
  </Grid>
</UserControl>